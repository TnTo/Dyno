import sys

env = Environment()

env.Append(CXXFLAGS=['-fprofile-arcs', '-ftest-coverage'], LIBS=['gcov'])

build_path_relative_to_sconstruct = Dir('.').path
conan = SConscript(
    '#{}/SConscript_conan'.format(build_path_relative_to_sconstruct))
if not conan:
    print('File `SConscript_conan` is missing.')
    print('It should be generated by running `conan install`.')
    sys.exit(1)

env.MergeFlags(conan['conan'])
env.Program('test', 'test.cpp')
